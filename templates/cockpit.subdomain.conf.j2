server {
  listen 443 ssl;
  listen [::]:443 ssl;

  server_name {{ swag_module_subdomain | mandatory }}.*

  include /config/nginx/ssl.conf

  location / {
    include /config/nginx/proxy.conf;
    include /config/nginx/resolver.conf;
    set $upstream_app {{ swag_module_dest_hostname | mandatory }};
    set $upstream_port {{ swag_module_dest_port | mandatory }};
    set $upstream_proto https;
    proxy_pass $upstream_proto://$upstream_app:$upstream_port;
  }
}
